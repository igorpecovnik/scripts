#
# This action recreate action for building stable images
#
name: Watchdog
on:
  workflow_dispatch:
  repository_dispatch:
    types: [Recreate Matrix]
jobs:
  table:
    runs-on: ubuntu-latest
    name: Update README from json data
    steps:
    - uses: actions/checkout@v2
    - name: Read/Write data into README
      uses: eddiejaoude/github-actions-reader-writer@v0.1
      with:
        json-file-path: 'merged.json'
        github-token: ${{ secrets.REPO }}
        columns: 3
        object-field-names: '[ "started", "dut_ip", "board_name", "board_slug", "u-boot", "kernel" , "iperf" , "sevenzip" , "armbian_monitor" , "kernel_target" ]'
        file-to-use: 'README.md'
        html-cell: '<tr><td align="left"><a href="{{ armbian_monitor }}">{{ board_name }}</a></p></td><td>{{ u-boot }}</td><td>{{ kernel }}</td></tr>'
